<main>
  <h1 class='page-title'>Meme Generator</h1>
  <section id="mg">
    <div id="canvas-parent">
      <canvas id="canvas"></canvas>
    </div>

    <div id="mg-controls-parent">
      <div id='actions-top'>
        <div>
          <input 
          type='search' 
          id='search'
          name='search' 
          placeholder='Search all memes'
          autocomplete='off'
          hx-post='/search'
          hx-trigger='input changed delay:500ms, search'
          hx-target='.search-results'
          >
          <div class='search-results'></div>
        </div>

      </div>
      <h3 id="mg-title"></h3>
      <section id="templates">
        <% @templates.each do |template| %>
          <img data-id='<%= template[:id] %>' class='template' title='<%= template[:title] %>' src='<%= template[:imagePath] %>'>
        <% end %>
      </section>

      <div id="mg-controls"></div>

      <div id="mg-actions">
        <button id="add-text">Add Text</button>
        <button id="download-btn">Download Meme</button>
        <button id="template-trigger">Upload New Template</button>
      </div>
    </div>
  </section>

</main>

<div id='template-modal' class='modal'>
  <div class='modal-body'>

    <form
      hx-encoding='multipart/form-data'
      hx-post='/add'
    >
        <label id='template-label' for='template-input'>Upload template</label> 
        <input name='image' id='template-input' autocomplete='off' type='file' accept='image/jpeg, image/png' >
        <div id='template-post-upload'>
          <img id='template-img' />
          <button>Add</button>
        </div>
    </form>

  </div>
</div>

<script>
  let selectedTemplate = <%= @selected_template_json %>
</script>

<script type="module" src="/js/main.js"></script>
